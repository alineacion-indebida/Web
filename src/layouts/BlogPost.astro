---
import Base from "@/layouts/Base.astro"
import type { CollectionEntry } from "astro:content"
import FormattedDate from "@/components/FormattedDate.astro"
import { Image } from "astro:assets"

type Props = CollectionEntry<"noticias">["data"]

const { title, description, date, imagen, categories, tags, autor } = Astro.props
---

<Base title={title} description={description}>
	<article>
		<div class="my-8 block overflow-hidden rounded-lg">
			{
				imagen && (
					<figure class="h-auto w-auto object-cover md:h-[480px]">
						<Image
							class="transition duration-300 ease-in-out"
							src={imagen}
							alt={title}
							width={960}
							height={480}
							decoding="async"
							loading="lazy"
						/>
					</figure>
				)
			}
		</div>
		<div class="md:col-10 mb-12 text-justify">
			<h1 class="text-2xl font-bold md:text-4xl">{title}</h1>
			<div
				class="text-text mt-4 flex flex-wrap items-center justify-between text-zinc-800 dark:text-zinc-200"
			>
				<div class="mt-2 flex flex-wrap items-center font-medium">
					<figure>
						<Image
							alt="author.name"
							class="mr-2 h-6 w-6 rounded-full"
							width={50}
							height={50}
							src="/img/Logo.svg"
							decoding="async"
							loading="lazy"
						/>
					</figure>
					<span>{autor}</span>
				</div>
				<div class="mt-2 flex flex-wrap items-center font-medium">
					<FormattedDate date={date} />
				</div>
			</div>
		</div>
		<div class="prose prose-invert prose-md md:prose-lg min-w-full">
			<slot />
		</div>
		<div class="text-text mt-4 flex flex-wrap text-zinc-800 dark:text-zinc-200">	
			{
				categories?.slice(0, 1).map((category) => (
					<a
						href={`/categories/${category}`}
						class="mr-2 font-medium capitalize hover:text-primary"
					>
					{category}
					</a>
				))
			} 
			|
			{
				tags?.map((tag) => (
					<a
						href={`/tags/${tag}`}
						class="mr-2 inline-block rounded-full bg-zinc-200 px-3 py-1 text-sm font-semibold capitalize text-zinc-700 dark:bg-zinc-900 dark:text-zinc-400"
					>
						#{tag}
					</a>
				))
			}
		</div>
	</article>
</Base>
